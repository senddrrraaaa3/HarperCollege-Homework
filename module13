#include <iostream>
#include <iomanip>
#include <fstream>
#include <random>
#include <vector>

using namespace std;

int simulateTrial(int n, double p, mt19937& gen, uniform_real_distribution<double>& dist) {
    int heads = 0;
    for (int i = 0; i < n; ++i) {
        if (dist(gen) < p) {
            heads++;
        }
    }
    return heads;
}

int main() {
    vector<int> n_values = {10, 50, 100, 250, 500};
    vector<double> p_values = {0.25, 0.5, 0.75};
    int m = 10;

    random_device rd;
    mt19937 gen(rd());
    uniform_real_distribution<double> dist(0.0, 1.0);

    ofstream outFile("coin_results.txt");

    cout << left << setw(18) << "Number of Flips (n)"
         << setw(18) << "Trial Number (m)"
         << setw(25) << "Probability of Heads (p)"
         << "Number of Heads" << endl;

    outFile << "Number of Flips (n),Trial Number (m),Probability of Heads (p),Number of Heads\n";

    for (int n : n_values) {
        for (double p : p_values) {
            for (int trial = 1; trial <= m; ++trial) {
                int heads = simulateTrial(n, p, gen, dist);

                cout << left << setw(18) << n
                     << setw(18) << trial
                     << setw(25) << fixed << setprecision(2) << p
                     << heads << endl;

                outFile << n << "," << trial << "," << fixed << setprecision(2) << p << "," << heads << "\n";
            }
        }
    }

    outFile.close();
    return 0;
}
